<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LinkUp - Sosyal Link AÄŸÄ±</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>tailwind.config = { darkMode: 'class' }</script>
    <style>
        .custom-scroll::-webkit-scrollbar { width: 4px; }
        .custom-scroll::-webkit-scrollbar-thumb { background: #6366f1; border-radius: 10px; }
        .glass { background: rgba(255, 255, 255, 0.05); backdrop-filter: blur(10px); }
    </style>
</head>
<body class="bg-slate-50 dark:bg-slate-900 min-h-screen text-slate-800 dark:text-slate-100 font-sans">

    <div class="flex h-screen overflow-hidden">
        
        <aside class="w-64 border-r border-slate-200 dark:border-slate-800 p-6 flex flex-col hidden lg:flex">
            <h1 class="text-2xl font-black text-indigo-600 mb-10">LinkUp</h1>
            <nav class="space-y-4 flex-1">
                <button onclick="sayfaDegistir('ana')" class="w-full text-left font-bold hover:text-indigo-600">ğŸ  KeÅŸfet</button>
                <div class="pt-6">
                    <p class="text-[10px] uppercase font-bold text-slate-400 mb-4">Listelerim</p>
                    <div id="solListeler" class="space-y-2 overflow-y-auto max-h-64 custom-scroll">
                        </div>
                </div>
            </nav>
            <button onclick="listeOlustur()" class="mt-4 bg-indigo-600/10 text-indigo-600 p-3 rounded-xl text-xs font-bold">+ Liste OluÅŸtur</button>
        </aside>

        <main class="flex-1 overflow-y-auto p-4 md:p-8 custom-scroll" id="anaIcerik">
            
            <div class="flex justify-between items-center mb-8">
                <div class="flex-1 max-w-md">
                    <input type="text" placeholder="Link, liste veya kiÅŸi ara..." class="w-full p-3 bg-white dark:bg-slate-800 rounded-2xl border border-slate-200 dark:border-slate-700 outline-none focus:ring-2 ring-indigo-500 transition-all">
                </div>
                <div class="flex items-center gap-4 ml-4">
                    <button onclick="document.documentElement.classList.toggle('dark')" class="p-3 bg-white dark:bg-slate-800 rounded-2xl shadow-sm">ğŸŒ™</button>
                    <button onclick="sayfaDegistir('profil')" class="flex items-center gap-2 p-1 pr-4 bg-white dark:bg-slate-800 rounded-full border border-slate-200 dark:border-slate-700 hover:shadow-md transition-all">
                        <div class="w-10 h-10 bg-indigo-600 rounded-full flex items-center justify-center text-white font-bold">R</div>
                        <span class="text-xs font-bold" id="headerUser">Profilim</span>
                    </button>
                </div>
            </div>

            <div id="dynamicView">
                <div class="bg-indigo-600 p-8 rounded-[2.5rem] text-white mb-10 relative overflow-hidden shadow-2xl shadow-indigo-500/20">
                    <h2 class="text-2xl font-black mb-4">Yeni bir baÄŸlantÄ± keÅŸfettin mi?</h2>
                    <div class="flex flex-col md:flex-row gap-3 relative z-10">
                        <input id="linkInput" type="text" placeholder="https://..." class="flex-[2] p-4 rounded-2xl bg-white/10 backdrop-blur-md border border-white/20 outline-none placeholder-white/60">
                        <button id="ekleButon" onclick="linkEkle()" class="bg-white text-indigo-600 px-10 py-4 rounded-2xl font-black hover:bg-slate-100 transition-all">EKLE</button>
                    </div>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-8" id="liste"></div>
            </div>
        </main>

        <aside class="w-80 border-l border-slate-200 dark:border-slate-800 p-6 hidden xl:flex flex-col">
            <h3 class="font-black text-sm mb-6 uppercase tracking-widest text-slate-400">Son Kaydedilenler</h3>
            <div id="sagAkis" class="space-y-6 overflow-y-auto custom-scroll">
                </div>
        </aside>

    </div>

<script>
    const API_URL = "https://link-depom-sunucu.onrender.com";

    async function verileriYukle() {
        const res = await fetch(`${API_URL}/data`);
        const data = await res.json();
        
        // SaÄŸ AkÄ±ÅŸ (Son 10 Link)
        const sagAkis = document.getElementById('sagAkis');
        sagAkis.innerHTML = data.sonLinkler.map(l => `
            <div class="flex gap-3 items-start group cursor-pointer" onclick="window.open('${l.link}', '_blank')">
                <img src="${l.resim}" class="w-12 h-12 rounded-xl object-cover border border-slate-200 dark:border-slate-700">
                <div>
                    <h4 class="text-[11px] font-bold line-clamp-1 group-hover:text-indigo-600">${l.baslik}</h4>
                    <p class="text-[9px] text-slate-500">@${l.creator} tarafÄ±ndan eklendi</p>
                </div>
            </div>
        `).join('');

        // Orta Alan (Liste GÃ¶rÃ¼nÃ¼mÃ¼)
        const listeAlan = document.getElementById('liste');
        listeAlan.innerHTML = data.populerListeler.map(lst => `
            <div class="bg-white dark:bg-slate-800 rounded-[2rem] p-6 border border-slate-100 dark:border-slate-700 shadow-sm">
                <div class="flex justify-between mb-4">
                    <h3 class="font-black text-lg">ğŸ“‚ ${lst.ad}</h3>
                    <span class="text-[10px] bg-slate-100 dark:bg-slate-700 px-2 py-1 rounded-lg">@${lst.creator}</span>
                </div>
                <div class="flex gap-4 text-[10px] text-slate-500 mb-6">
                    <span>ğŸ‘ï¸ ${lst.views}</span> <span>â¤ï¸ ${lst.likes}</span> <span>ğŸ“¥ ${lst.savedBy}</span>
                </div>
                <button class="w-full py-3 border-2 border-indigo-600 text-indigo-600 rounded-xl text-xs font-black hover:bg-indigo-600 hover:text-white transition-all">LÄ°STEYÄ° Ä°NCELE</button>
                <button class="w-full mt-2 py-2 text-[10px] text-slate-400 hover:text-indigo-500">â• Bu Listeye Link Ã–ner</button>
            </div>
        `).join('');
    }

    async function linkEkle() {
        const lInput = document.getElementById('linkInput');
        const btn = document.getElementById('ekleButon');
        if(!lInput.value) return;
        btn.innerText = "EKLENÄ°YOR...";
        await fetch(`${API_URL}/analiz`, {
            method: 'POST',
            headers: {'Content-Type': 'application/json'},
            body: JSON.stringify({ linkUrl: lInput.value, creator: "royal" })
        });
        lInput.value = '';
        btn.innerText = "EKLE";
        verileriYukle();
    }

    function sayfaDegistir(sayfa) {
        const view = document.getElementById('dynamicView');
        if(sayfa === 'profil') {
            view.innerHTML = `
                <div class="bg-white dark:bg-slate-800 rounded-[3rem] p-10 border border-slate-100 dark:border-slate-700 shadow-xl mb-10">
                    <div class="flex flex-col md:flex-row items-center gap-8">
                        <div class="w-32 h-32 bg-indigo-600 rounded-[2.5rem] flex items-center justify-center text-5xl text-white font-black">R</div>
                        <div class="text-center md:text-left">
                            <h2 class="text-4xl font-black mb-2">royal</h2>
                            <p class="text-slate-500 text-sm mb-4 italic">ğŸ“… KayÄ±t: 02.01.2026</p>
                            <textarea class="w-full p-4 bg-slate-50 dark:bg-slate-700 rounded-2xl outline-none text-xs" placeholder="HakkÄ±nda bir ÅŸeyler yaz...">Link koleksiyoncusu ve teknoloji meraklÄ±sÄ±.</textarea>
                        </div>
                    </div>
                </div>
                <h3 class="text-xl font-black mb-6">OluÅŸturduÄŸum Listeler</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4" id="profilListeler">
                    <div class="p-8 border-2 border-dashed border-slate-300 dark:border-slate-700 rounded-[2rem] text-center text-slate-400">
                        HenÃ¼z bir liste oluÅŸturmadÄ±n.
                    </div>
                </div>
            `;
        } else {
            location.reload();
        }
    }

    window.onload = verileriYukle;
</script>
</body>
</html>