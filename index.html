<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LinkUp | Güvenli Kısayol Portalı</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;700;800&display=swap');
        body { font-family: 'Plus Jakarta Sans', sans-serif; }
    </style>
</head>
<body class="bg-[#F8FAFC]">

    <div id="authArea" class="min-h-screen flex items-center justify-center bg-indigo-600 p-6">
        <div class="bg-white p-10 rounded-[3rem] w-full max-w-md shadow-2xl">
            <h2 class="text-4xl font-black italic text-indigo-600 mb-8 text-center">LinkUp</h2>
            
            <div id="authBox" class="space-y-3">
                <input id="authUsername" placeholder="Kullanıcı Adı" class="w-full p-4 bg-slate-50 rounded-2xl outline-none border-2 focus:border-indigo-500 hidden">
                <input id="authEmail" type="email" placeholder="E-posta" class="w-full p-4 bg-slate-50 rounded-2xl outline-none border-2 focus:border-indigo-500">
                <input id="authPass" type="password" placeholder="Şifre" class="w-full p-4 bg-slate-50 rounded-2xl outline-none border-2 focus:border-indigo-500">
                
                <button onclick="authIslem()" id="mainAuthBtn" class="w-full p-4 bg-indigo-600 text-white rounded-2xl font-black">Giriş Yap</button>
                
                <div class="flex justify-between px-2">
                    <p onclick="authModDegistir()" id="toggleBtn" class="text-[10px] font-bold text-slate-400 cursor-pointer uppercase">Kayıt Ol</p>
                    <p onclick="sifremiUnuttum()" class="text-[10px] font-bold text-indigo-400 cursor-pointer uppercase">Şifremi Unuttum</p>
                </div>
            </div>

            <div id="forgotBox" class="hidden space-y-3 text-center">
                <p class="text-xs text-slate-500 font-bold">Sıfırlama kodu e-postana gönderilecek.</p>
                <input id="resetEmail" placeholder="E-posta Adresiniz" class="w-full p-4 bg-slate-50 rounded-2xl outline-none border-2 focus:border-indigo-500">
                <button onclick="resetIste()" class="w-full p-4 bg-slate-900 text-white rounded-2xl font-black">KOD GÖNDER</button>
                <p onclick="location.reload()" class="text-[10px] font-bold text-slate-400 cursor-pointer">Geri Dön</p>
            </div>
        </div>
    </div>

    <div id="mainArea" class="hidden min-h-screen flex">
        </div>

<script>
    const API_URL = "https://link-depom-sunucu.onrender.com";
    let isLoginMode = true;

    async function authIslem() {
        const email = document.getElementById('authEmail').value;
        const password = document.getElementById('authPass').value;
        const username = document.getElementById('authUsername').value;
        
        const path = isLoginMode ? '/auth/login' : '/auth/register';
        const res = await fetch(`${API_URL}${path}`, {
            method: 'POST',
            headers: {'Content-Type': 'application/json'},
            body: JSON.stringify({ email, password, username })
        });
        
        const data = await res.json();
        if (data.success && !isLoginMode) {
            alert("Kayıt başarılı! Lütfen e-postanı kontrol ederek hesabını onayla.");
            location.reload();
        } else if (data.token) {
            localStorage.setItem('token', data.token);
            localStorage.setItem('username', data.username);
            localStorage.setItem('userId', data.userId);
            location.reload();
        } else {
            alert(data.error || "Bir hata oluştu");
        }
    }

    function sifremiUnuttum() {
        document.getElementById('authBox').classList.add('hidden');
        document.getElementById('forgotBox').classList.remove('hidden');
    }

    async function resetIste() {
        const email = document.getElementById('resetEmail').value;
        const res = await fetch(`${API_URL}/auth/forgot-password`, {
            method: 'POST',
            headers: {'Content-Type': 'application/json'},
            body: JSON.stringify({ email })
        });
        if(res.ok) alert("Sıfırlama talimatları e-postana gönderildi.");
    }

    function authModDegistir() {
        isLoginMode = !isLoginMode;
        document.getElementById('authUsername').classList.toggle('hidden');
        document.getElementById('mainAuthBtn').innerText = isLoginMode ? "Giriş Yap" : "Kayıt Ol";
        document.getElementById('toggleBtn').innerText = isLoginMode ? "Kayıt Ol" : "Giriş Yap";
    }
    
    // Sayfa yükleme kontrolü v9 ile aynı...
</script>
</body>
</html>