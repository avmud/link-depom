<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <title>LinkUp | Profesyonel Sosyal ArÅŸiv ve BaÄŸlantÄ± YÃ¶netimi</title>
    <meta name="description" content="LinkUp ile internetin en deÄŸerli YouTube, Instagram ve eÄŸitim iÃ§eriklerini profesyonelce arÅŸivleyin. Sosyal medya kÃ¼rasyonu ve baÄŸlantÄ± yÃ¶netimi.">
    <meta name="keywords" content="link arÅŸivi, sosyal arÅŸiv, baÄŸlantÄ± yÃ¶netimi, youtube liste kaydetme, eÄŸitim kaynaklarÄ± dÃ¼zenleme">
    <meta name="author" content="LinkUp">
    
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800;900&display=swap');
        body { font-family: 'Inter', sans-serif; }
        .folder-item { @apply cursor-pointer transition-all p-3 rounded-xl text-[13px] font-bold flex items-center gap-2 text-slate-600; }
        .folder-item:hover { @apply bg-indigo-50 text-indigo-600; }
        .folder-active { @apply bg-indigo-600 text-white !important; }
        .sub-folder { @apply ml-5 border-l-2 border-slate-100 pl-2 mt-1 space-y-1; }
        .action-card { @apply bg-white p-8 rounded-[2.5rem] shadow-sm border border-slate-100; }
        .input-box { @apply w-full p-4 bg-slate-50 rounded-2xl outline-none border-2 border-transparent focus:border-indigo-500 transition-all text-sm; }
        .custom-scroll::-webkit-scrollbar { width: 4px; }
        .custom-scroll::-webkit-scrollbar-thumb { background: #e2e8f0; border-radius: 10px; }
    </style>
</head>
<body class="bg-[#F8FAFC] text-slate-800">

    <div class="flex h-screen overflow-hidden">
        
        <aside class="w-72 bg-white border-r border-slate-200 p-8 flex flex-col">
            <h1 onclick="renderView('ana')" class="text-3xl font-black text-indigo-600 mb-10 italic tracking-tighter cursor-pointer">LinkUp</h1>
            
            <nav class="flex-1 space-y-6 overflow-y-auto custom-scroll pr-2">
                <div>
                    <p class="text-[10px] font-black text-slate-400 uppercase mb-4 tracking-widest">TÃ¼m KÄ±sayollarÄ±m</p>
                    <div id="treeView" class="space-y-1">
                        </div>
                </div>
                
                <button class="w-full p-3 border-2 border-dashed border-slate-200 rounded-xl text-slate-400 font-bold text-[11px] hover:border-indigo-500 hover:text-indigo-600 transition-all">
                    + Yeni Liste OluÅŸtur
                </button>

                <div class="pt-6 border-t border-slate-100">
                    <p class="text-[10px] font-black text-slate-400 uppercase mb-4 tracking-widest">Kurumsal</p>
                    <div class="space-y-2">
                        <button onclick="yasalAc('hakkimizda')" class="text-xs text-slate-500 hover:text-indigo-600 font-semibold block">HakkÄ±mÄ±zda</button>
                        <button onclick="yasalAc('gizlilik')" class="text-xs text-slate-500 hover:text-indigo-600 font-semibold block">Gizlilik PolitikasÄ±</button>
                        <button onclick="yasalAc('iletisim')" class="text-xs text-slate-500 hover:text-indigo-600 font-semibold block">Ä°letiÅŸim / Bildir</button>
                    </div>
                </div>
            </nav>

            <button onclick="modalAc()" class="mt-8 bg-indigo-600 text-white p-5 rounded-2xl font-black shadow-xl shadow-indigo-100 hover:scale-[1.02] active:scale-95 transition-all text-sm">
                + BAÄLANTI EKLE
            </button>
        </aside>

        <main class="flex-1 flex flex-col overflow-hidden">
            <header class="h-24 bg-white/80 backdrop-blur-md border-b border-slate-100 px-10 flex justify-between items-center shrink-0">
                <div class="flex-1 max-w-xl relative">
                    <input id="searchInput" type="text" placeholder="KÄ±sayol, liste veya kiÅŸi ara..." class="w-full p-4 bg-slate-50 rounded-2xl outline-none text-sm border border-transparent focus:border-indigo-200 transition-all">
                    <span class="absolute right-4 top-4 text-slate-300">ğŸ”</span>
                </div>
                <div class="flex items-center gap-8">
                    <div class="flex gap-6 text-[11px] font-bold uppercase text-slate-400">
                        <button class="hover:text-indigo-600 transition-colors relative">Bildirimler <span class="absolute -top-1 -right-2 w-2 h-2 bg-red-500 rounded-full"></span></button>
                        <button class="hover:text-indigo-600 transition-colors">Mesajlar</button>
                    </div>
                    <button onclick="renderView('profil')" class="flex items-center gap-3 p-1 pr-5 bg-slate-50 rounded-full hover:bg-slate-100 transition-all border border-slate-100">
                        <div class="w-10 h-10 bg-indigo-600 rounded-full flex items-center justify-center text-white font-black">U</div>
                        <span class="text-sm font-bold">Profilim</span>
                    </button>
                </div>
            </header>

            <div id="mainScroll" class="flex-1 overflow-y-auto p-10 space-y-8 custom-scroll">
                
                <div class="w-full p-6 bg-white rounded-3xl border-2 border-dashed border-slate-100 flex items-center justify-center">
                    <div class="text-center">
                        <p class="text-[9px] font-black text-slate-300 uppercase tracking-[0.2em] mb-1">Google AdSense</p>
                        <p class="text-xs text-slate-400 italic font-medium">Reklamlar Onay SonrasÄ± Burada YayÄ±nlanacak</p>
                    </div>
                </div>

                <div id="dynamicContainer" class="space-y-8">
                    </div>
            </div>
        </main>
    </div>

    <div id="yasalModal" class="hidden fixed inset-0 bg-slate-900/60 backdrop-blur-md z-[100] flex items-center justify-center p-6">
        <div class="bg-white w-full max-w-2xl rounded-[3rem] p-12 shadow-2xl max-h-[80vh] overflow-y-auto custom-scroll relative">
            <button onclick="yasalKapat()" class="absolute top-8 right-8 text-slate-400 hover:text-slate-900 text-3xl font-black">Ã—</button>
            <h2 id="yasalTitle" class="text-3xl font-black mb-6 italic tracking-tighter"></h2>
            <div id="yasalText" class="text-slate-600 leading-relaxed space-y-4 text-sm font-medium"></div>
        </div>
    </div>

    <div id="addModal" class="hidden fixed inset-0 bg-slate-900/60 backdrop-blur-md z-[90] flex items-center justify-center p-6">
        <div class="bg-white w-full max-w-xl rounded-[3rem] p-10 shadow-2xl space-y-6">
            <h3 class="text-2xl font-black italic tracking-tighter">Yeni Bir KÄ±sayol Ekle</h3>
            <input id="urlIn" placeholder="BaÄŸlantÄ±yÄ± buraya yapÄ±ÅŸtÄ±r (https://...)" class="input-box py-5 text-base">
            <div class="grid grid-cols-2 gap-4">
                <input id="titleIn" placeholder="BaÅŸlÄ±k Yaz" class="input-box">
                <input id="tagIn" placeholder="Etiketler (virgÃ¼l ile)" class="input-box">
            </div>
            <textarea id="descIn" placeholder="EditÃ¶r Notu: Bu link neden Ã¶nemli? (SEO iÃ§in 10-15 kelime yazÄ±n)" class="input-box h-24 resize-none"></textarea>
            <div class="space-y-2">
                <p class="text-[10px] font-black text-slate-400 uppercase tracking-widest">Listeleri SeÃ§</p>
                <div id="modalListCheckboxes" class="flex flex-wrap gap-2 max-h-24 overflow-y-auto p-2 bg-slate-50 rounded-xl"></div>
            </div>
            <div class="flex gap-4 pt-4">
                <button onclick="modalKapat()" class="flex-1 p-4 font-bold text-slate-400 hover:text-slate-600 transition-colors">Ä°PTAL</button>
                <button onclick="kaydet()" class="flex-[2] p-4 bg-indigo-600 text-white rounded-2xl font-black shadow-lg shadow-indigo-100">KÃœTÃœPHANEYE EKLE</button>
            </div>
        </div>
    </div>

<script>
    const API_URL = "https://link-depom-sunucu.onrender.com";
    let currentMode = "ana";
    let dbCache = null;

    const yasalIcerik = {
        hakkimizda: { t: "LinkUp HakkÄ±nda", c: "LinkUp, internet Ã¼zerindeki deÄŸerli bilgileri, eÄŸitim videolarÄ±nÄ± ve sosyal medya iÃ§eriklerini dÃ¼zenli bir ÅŸekilde saklamanÄ±z iÃ§in geliÅŸtirilmiÅŸ profesyonel bir arÅŸivleme platformudur. Bilgiyi kaybetmeyin, listeleyin." },
        gizlilik: { t: "Gizlilik PolitikasÄ±", c: "Verileriniz bizimle gÃ¼vende. LinkUp, Avrupa birliÄŸi standartlarÄ±nda veri koruma uygular. PaylaÅŸÄ±lan linkler anonim olarak trend analizlerinde kullanÄ±labilir ancak kiÅŸisel bilgileriniz asla satÄ±lmaz." },
        iletisim: { t: "Ä°letiÅŸim & Bildir", c: "Her tÃ¼rlÃ¼ hata raporu, telif hakkÄ± bildirimi veya 'mÃ¼stehcen iÃ§erik' ÅŸikayeti iÃ§in <b>destek@linkup.com</b> adresine e-posta gÃ¶nderebilirsiniz." }
    };

    async function verileriGetir() {
        try {
            const res = await fetch(`${API_URL}/data`);
            dbCache = await res.json();
            
            // 1. Sol MenÃ¼ KlasÃ¶rleme
            renderFolders();
            // 2. Modal Liste SeÃ§enekleri
            renderModalLists();
            // 3. Ana Ä°Ã§erik
            renderMain();
        } catch (e) { console.error("BaÄŸlantÄ± HatasÄ±:", e); }
    }

    function renderFolders() {
        const treeHtml = dbCache.listeler.filter(l => !l.parent).map(parent => `
            <div class="mb-1">
                <div onclick="renderView('list-${parent.ad}')" class="folder-item ${currentMode === 'list-'+parent.ad ? 'folder-active' : ''}">
                    <span class="text-lg">ğŸ“‚</span> ${parent.ad}
                </div>
                <div class="sub-folder">
                    ${dbCache.listeler.filter(l => l.parent === parent.ad).map(sub => `
                        <div onclick="renderView('list-${sub.ad}')" class="folder-item ${currentMode === 'list-'+sub.ad ? 'folder-active' : ''}">
                            <span class="opacity-40 text-xs">ğŸ“‘</span> ${sub.ad}
                        </div>
                    `).join('')}
                </div>
            </div>
        `).join('');
        document.getElementById('treeView').innerHTML = treeHtml;
    }

    function renderModalLists() {
        document.getElementById('modalListCheckboxes').innerHTML = dbCache.listeler.map(l => `
            <label class="flex items-center gap-2 bg-white px-3 py-1.5 rounded-lg border border-slate-200 cursor-pointer text-[11px] font-bold">
                <input type="checkbox" value="${l.ad}" class="l-check accent-indigo-600"> ${l.ad}
            </label>
        `).join('');
    }

    function renderMain() {
        const container = document.getElementById('dynamicContainer');
        
        if (currentMode === 'profil') {
            const s = dbCache.user.stats;
            container.innerHTML = `
                <div class="bg-white p-12 rounded-[3.5rem] shadow-sm border border-slate-100 space-y-10">
                    <div class="flex items-center gap-8">
                        <div class="w-28 h-28 bg-indigo-600 rounded-[2.5rem] flex items-center justify-center text-white text-5xl font-black shadow-2xl shadow-indigo-200 italic">U</div>
                        <div>
                            <h2 class="text-4xl font-black tracking-tighter italic">Merhaba, ${dbCache.user.username}</h2>
                            <p class="text-slate-400 font-bold text-xs uppercase tracking-widest mt-2">âœ¨ Profesyonel ArÅŸivci Profile</p>
                        </div>
                    </div>
                    <div class="grid grid-cols-4 gap-6">
                        <div class="bg-slate-50 p-6 rounded-[2rem] text-center border border-slate-100">
                            <p class="text-[10px] font-black text-slate-400 mb-1 uppercase tracking-tighter">Toplam KayÄ±t</p>
                            <p class="text-3xl font-black text-slate-800">${s.totalLinks}</p>
                        </div>
                        <div class="bg-slate-50 p-6 rounded-[2rem] text-center border border-slate-100">
                            <p class="text-[10px] font-black text-slate-400 mb-1 uppercase tracking-tighter">Liste SayÄ±sÄ±</p>
                            <p class="text-3xl font-black text-slate-800">${s.totalLists}</p>
                        </div>
                        <div class="bg-slate-50 p-6 rounded-[2rem] text-center border border-slate-100">
                            <p class="text-[10px] font-black text-slate-400 mb-1 uppercase tracking-tighter">Kaydedilme</p>
                            <p class="text-3xl font-black text-indigo-600">${s.linkLikes}</p>
                        </div>
                        <div class="bg-slate-50 p-6 rounded-[2rem] text-center border border-slate-100">
                            <p class="text-[10px] font-black text-slate-400 mb-1 uppercase tracking-tighter">TakipÃ§i</p>
                            <p class="text-3xl font-black text-indigo-600">${s.followers}</p>
                        </div>
                    </div>
                </div>`;
            return;
        }

        // FEED RENDER
        let links = dbCache.links;
        let title = "KeÅŸfet";

        if (currentMode.startsWith('list-')) {
            title = currentMode.replace('list-', '');
            links = dbCache.links.filter(l => l.listeler && l.listeler.includes(title));
        }

        container.innerHTML = `
            <div class="flex justify-between items-center px-2">
                <h2 class="text-4xl font-black italic tracking-tighter italic text-slate-900">${title}</h2>
                <div class="flex gap-3">
                    <button class="px-6 py-2.5 bg-white border border-slate-200 rounded-full text-[11px] font-black uppercase tracking-tight hover:bg-indigo-50">ğŸ”¥ Trendler</button>
                    <button class="px-6 py-2.5 bg-white border border-slate-200 rounded-full text-[11px] font-black uppercase tracking-tight hover:bg-indigo-50">ğŸ‘¥ Takip Ettiklerin</button>
                </div>
            </div>
            
            <div id="platformRow" class="flex gap-2 overflow-x-auto pb-2 no-scrollbar">
                ${dbCache.platforms ? dbCache.platforms.map(p => `
                    <button onclick="platformFiltrele('${p.domain}')" class="shrink-0 px-4 py-2 bg-indigo-50 text-indigo-600 rounded-xl text-[10px] font-black border border-indigo-100 uppercase italic">
                        ğŸš€ ${p.domain.split('.')[0]}
                    </button>
                `).join('') : ''}
            </div>

            <div class="grid gap-5">
                ${links.length > 0 ? links.reverse().map(l => `
                    <div class="bg-white p-6 rounded-[2.5rem] border border-slate-100 flex items-center gap-6 hover:shadow-xl hover:shadow-indigo-900/5 transition-all group">
                        <div class="w-16 h-16 bg-slate-50 rounded-2xl flex items-center justify-center text-2xl group-hover:scale-110 transition-transform">ğŸ”—</div>
                        <div class="flex-1">
                            <div class="flex items-center gap-2 mb-1">
                                <h4 class="font-black text-slate-800 text-lg">${l.baslik}</h4>
                                <span class="text-[10px] font-black text-indigo-400 uppercase italic bg-indigo-50 px-2 rounded-md">${l.domain || ''}</span>
                            </div>
                            <p class="text-xs text-slate-400 font-medium italic mb-3 line-clamp-1">${l.aciklama || 'Harika bir iÃ§erik keÅŸfi.'}</p>
                            <div class="flex gap-2">
                                ${l.listeler.map(tag => `<span class="bg-slate-100 text-slate-500 text-[9px] font-black px-2 py-1 rounded-lg uppercase">${tag}</span>`).join('')}
                            </div>
                        </div>
                        <div class="flex gap-3">
                            <button onclick="window.open('${l.url}', '_blank')" class="px-8 py-4 bg-slate-900 text-white rounded-2xl text-[11px] font-black hover:bg-indigo-600 transition-all shadow-lg shadow-slate-200">GÄ°T â†—</button>
                            <button class="p-4 text-red-200 hover:text-red-500 text-2xl transition-all" title="Bildir">âš ï¸</button>
                        </div>
                    </div>
                `).join('') : `<div class="p-20 text-center text-slate-300 font-bold italic">Bu listede henÃ¼z kÄ±sayol yok.</div>`}
            </div>
        `;
    }

    async function kaydet() {
        const payload = {
            url: document.getElementById('urlIn').value,
            baslik: document.getElementById('titleIn').value,
            aciklama: document.getElementById('descIn').value,
            secilenListeler: Array.from(document.querySelectorAll('.l-check:checked')).map(c => c.value),
            creator: "royal"
        };
        const res = await fetch(`${API_URL}/kaydet`, { 
            method: 'POST', 
            headers: {'Content-Type': 'application/json'}, 
            body: JSON.stringify(payload) 
        });
        if(res.ok) { modalKapat(); verileriGetir(); }
    }

    function renderView(mode) { currentMode = mode; verileriGetir(); }
    function modalAc() { document.getElementById('addModal').classList.remove('hidden'); }
    function modalKapat() { document.getElementById('addModal').classList.add('hidden'); }
    function yasalAc(k) {
        document.getElementById('yasalTitle').innerText = yasalIcerik[k].t;
        document.getElementById('yasalIcerik').innerHTML = yasalIcerik[k].c;
        document.getElementById('yasalModal').classList.remove('hidden');
    }
    function yasalKapat() { document.getElementById('yasalModal').classList.add('hidden'); }

    window.onload = verileriGetir;
</script>
</body>
</html>